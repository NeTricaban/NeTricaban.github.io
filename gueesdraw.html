<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–≥–∞–¥–∞–π –°–ª–æ–≤–æ - –†–∏—Å—É–π –∏ –£–≥–∞–¥—ã–≤–∞–π</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        
        body {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            font-size: 24px;
        }
        
        .screen {
            display: none;
        }
        
        .active {
            display: block;
        }
        
        /* –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Ä–æ–ª–∏ */
        .role-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 30px 0;
        }
        
        .role-btn {
            padding: 20px;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .role-btn:hover {
            transform: scale(1.05);
        }
        
        .draw-btn {
            background: #FFD93D;
            color: #333;
        }
        
        .guess-btn {
            background: #6BCF7F;
            color: white;
        }
        
        /* –•–æ–ª—Å—Ç –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è */
        .canvas-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 15px;
            margin: 20px 0;
            touch-action: none;
        }
        
        #drawingCanvas {
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            display: block;
            width: 100%;
            height: 300px;
            touch-action: none;
        }
        
        .tools {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .tool {
            width: 40px;
            height: 40px;
            border: 2px solid #ddd;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            cursor: pointer;
        }
        
        .color {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid #ddd;
            cursor: pointer;
        }
        
        .color.active {
            border-color: #333;
            transform: scale(1.2);
        }
        
        /* –£–≥–∞–¥—ã–≤–∞–Ω–∏–µ */
        .word-display {
            font-size: 32px;
            text-align: center;
            margin: 30px 0;
            letter-spacing: 5px;
            color: #333;
        }
        
        .guess-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 18px;
            margin: 20px 0;
            text-align: center;
        }
        
        .submit-btn {
            width: 100%;
            padding: 15px;
            background: #4ECDC4;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
        }
        
        .hint {
            text-align: center;
            color: #666;
            margin: 10px 0;
            font-size: 14px;
        }
        
        /* –†–µ–∑—É–ª—å—Ç–∞—Ç */
        .result {
            text-align: center;
            margin: 30px 0;
        }
        
        .result h2 {
            color: #4ECDC4;
            margin-bottom: 20px;
        }
        
        .action-btn {
            padding: 15px 30px;
            background: #FF6B6B;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            margin: 10px;
        }
        
        .word-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 20px 0;
        }
        
        .word-option {
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            font-size: 16px;
        }
        
        .word-option:hover {
            background: #e9ecef;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div id="mainScreen" class="screen active">
            <h1>üé® –£–≥–∞–¥–∞–π –°–ª–æ–≤–æ</h1>
            <p style="text-align: center; margin-bottom: 30px; color: #666;">
                –û–¥–∏–Ω —Ä–∏—Å—É–µ—Ç - –¥—Ä—É–≥–æ–π —É–≥–∞–¥—ã–≤–∞–µ—Ç!
            </p>
            
            <div class="role-buttons">
                <button class="role-btn draw-btn" onclick="startDrawing()">
                    üñåÔ∏è –Ø –±—É–¥—É —Ä–∏—Å–æ–≤–∞—Ç—å
                </button>
                <button class="role-btn guess-btn" onclick="startGuessing()">
                    üîç –Ø –±—É–¥—É —É–≥–∞–¥—ã–≤–∞—Ç—å
                </button>
            </div>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω —Ä–∏—Å–æ–≤–∞–Ω–∏—è -->
        <div id="drawScreen" class="screen">
            <h1>–†–∏—Å—É–π—Ç–µ —ç—Ç–æ —Å–ª–æ–≤–æ:</h1>
            <div class="word-display" id="wordToDraw">–Ø–ë–õ–û–ö–û</div>
            
            <div class="canvas-container">
                <canvas id="drawingCanvas"></canvas>
            </div>
            
            <div class="tools">
                <div class="tool" onclick="changeColor('#000000')">‚úèÔ∏è</div>
                <div class="tool" onclick="changeColor('#FF0000')">üî¥</div>
                <div class="tool" onclick="changeColor('#0000FF')">üîµ</div>
                <div class="tool" onclick="changeColor('#00FF00')">üü¢</div>
                <div class="tool" onclick="clearCanvas()">üóëÔ∏è</div>
            </div>
            
            <button class="submit-btn" onclick="finishDrawing()">
                –ì–æ—Ç–æ–≤–æ!
            </button>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω —É–≥–∞–¥—ã–≤–∞–Ω–∏—è -->
        <div id="guessScreen" class="screen">
            <h1>–£–≥–∞–¥–∞–π—Ç–µ —á—Ç–æ –Ω–∞—Ä–∏—Å–æ–≤–∞–Ω–æ:</h1>
            
            <div class="canvas-container">
                <canvas id="guessCanvas"></canvas>
            </div>
            
            <div class="word-options" id="wordOptions">
                <!-- –í–∞—Ä–∏–∞–Ω—Ç—ã —Å–ª–æ–≤ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å -->
            </div>
            
            <input type="text" class="guess-input" id="guessInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ...">
            <button class="submit-btn" onclick="checkGuess()">
                –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
            </button>
            <p class="hint">–ò–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç —Å–≤–µ—Ä—Ö—É</p>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ -->
        <div id="resultScreen" class="screen">
            <div class="result">
                <h2 id="resultTitle">–ü—Ä–∞–≤–∏–ª—å–Ω–æ! üéâ</h2>
                <p id="resultMessage">–í—ã —É–≥–∞–¥–∞–ª–∏ —Å–ª–æ–≤–æ "–Ø–ë–õ–û–ö–û"</p>
                
                <button class="action-btn" onclick="playAgain()">
                    –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞
                </button>
                <button class="action-btn" onclick="showMainScreen()">
                    –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
                </button>
            </div>
        </div>
    </div>

    <script>
        // –°–ª–æ–≤–∞ –¥–ª—è –∏–≥—Ä—ã
        const words = [
            { word: "–Ø–ë–õ–û–ö–û", category: "–§—Ä—É–∫—Ç—ã" },
            { word: "–ú–ê–®–ò–ù–ê", category: "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç" },
            { word: "–î–û–ú", category: "–ó–¥–∞–Ω–∏—è" },
            { word: "–°–û–ë–ê–ö–ê", category: "–ñ–∏–≤–æ—Ç–Ω—ã–µ" },
            { word: "–°–û–õ–ù–¶–ï", category: "–ü—Ä–∏—Ä–æ–¥–∞" },
            { word: "–ö–ù–ò–ì–ê", category: "–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ" },
            { word: "–¢–ï–õ–ï–§–û–ù", category: "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏" },
            { word: "–î–ï–†–ï–í–û", category: "–ü—Ä–∏—Ä–æ–¥–∞" },
            { word: "–ß–ê–°–´", category: "–ü—Ä–µ–¥–º–µ—Ç—ã" },
            { word: "–ú–Ø–ß", category: "–°–ø–æ—Ä—Ç" }
        ];

        let currentWord = '';
        let currentRole = '';
        let canvas, ctx;
        let guessCanvas, guessCtx;
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;
        let currentColor = '#000000';
        let drawingData = [];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            canvas = document.getElementById('drawingCanvas');
            ctx = canvas.getContext('2d');
            setupCanvas(canvas, ctx);
            
            guessCanvas = document.getElementById('guessCanvas');
            guessCtx = guessCanvas.getContext('2d');
            setupCanvas(guessCanvas, guessCtx);
        }

        function setupCanvas(canvasElement, context) {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã canvas
            canvasElement.width = canvasElement.offsetWidth;
            canvasElement.height = canvasElement.offsetHeight;
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∏—Å–æ–≤–∞–Ω–∏—è
            context.lineJoin = 'round';
            context.lineCap = 'round';
            context.lineWidth = 3;
            context.strokeStyle = currentColor;
            
            // –°–æ–±—ã—Ç–∏—è –¥–ª—è –º—ã—à–∏
            canvasElement.addEventListener('mousedown', startDraw);
            canvasElement.addEventListener('mousemove', draw);
            canvasElement.addEventListener('mouseup', endDraw);
            canvasElement.addEventListener('mouseout', endDraw);
            
            // –°–æ–±—ã—Ç–∏—è –¥–ª—è –∫–∞—Å–∞–Ω–∏–π
            canvasElement.addEventListener('touchstart', handleTouch);
            canvasElement.addEventListener('touchmove', handleTouch);
            canvasElement.addEventListener('touchend', endDraw);
        }

        function handleTouch(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousedown', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            canvas.dispatchEvent(mouseEvent);
        }

        function startDraw(e) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            lastX = e.clientX - rect.left;
            lastY = e.clientY - rect.top;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—á–∞–ª–æ –ª–∏–Ω–∏–∏
            drawingData.push({
                type: 'begin',
                x: lastX,
                y: lastY,
                color: currentColor
            });
        }

        function draw(e) {
            if (!isDrawing) return;
            
            const rect = canvas.getBoundingClientRect();
            const currentX = e.clientX - rect.left;
            const currentY = e.clientY - rect.top;

            // –†–∏—Å—É–µ–º –Ω–∞ canvas
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(currentX, currentY);
            ctx.strokeStyle = currentColor;
            ctx.stroke();

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏
            drawingData.push({
                type: 'draw',
                x: currentX,
                y: currentY,
                color: currentColor
            });

            lastX = currentX;
            lastY = currentY;
        }

        function endDraw() {
            isDrawing = false;
            drawingData.push({ type: 'end' });
        }

        function changeColor(color) {
            currentColor = color;
            ctx.strokeStyle = color;
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawingData = [];
        }

        // –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
        function startDrawing() {
            currentRole = 'drawer';
            // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ —Å–ª–æ–≤–æ
            const randomIndex = Math.floor(Math.random() * words.length);
            currentWord = words[randomIndex].word;
            
            document.getElementById('wordToDraw').textContent = currentWord;
            showScreen('drawScreen');
            clearCanvas();
        }

        function startGuessing() {
            currentRole = 'guesser';
            showScreen('guessScreen');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–ª–æ–≤
            showWordOptions();
            
            // –û—á–∏—â–∞–µ–º canvas –¥–ª—è —É–≥–∞–¥—ã–≤–∞–Ω–∏—è
            guessCtx.clearRect(0, 0, guessCanvas.width, guessCanvas.height);
        }

        function showWordOptions() {
            const container = document.getElementById('wordOptions');
            container.innerHTML = '';
            
            // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –∏–∑ 4 —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–ª–æ–≤ + –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–ª–æ–≤–æ
            const options = [currentWord];
            while (options.length < 4) {
                const randomWord = words[Math.floor(Math.random() * words.length)].word;
                if (!options.includes(randomWord)) {
                    options.push(randomWord);
                }
            }
            
            // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã
            options.sort(() => Math.random() - 0.5);
            
            // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏
            options.forEach(word => {
                const button = document.createElement('div');
                button.className = 'word-option';
                button.textContent = word;
                button.onclick = () => {
                    document.getElementById('guessInput').value = word;
                    checkGuess();
                };
                container.appendChild(button);
            });
        }

        function finishDrawing() {
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–∏—Å—É–Ω–æ–∫ –≤ localStorage
            localStorage.setItem('drawingData', JSON.stringify(drawingData));
            localStorage.setItem('currentWord', currentWord);
            
            alert('–†–∏—Å—É–Ω–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω! –ü–µ—Ä–µ–¥–∞–π—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Ç–æ–º—É, –∫—Ç–æ –±—É–¥–µ—Ç —É–≥–∞–¥—ã–≤–∞—Ç—å.');
            showMainScreen();
        }

        function checkGuess() {
            const guessInput = document.getElementById('guessInput');
            const userGuess = guessInput.value.trim().toUpperCase();
            
            if (userGuess === currentWord) {
                // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                document.getElementById('resultTitle').textContent = '–ü—Ä–∞–≤–∏–ª—å–Ω–æ! üéâ';
                document.getElementById('resultMessage').textContent = `–í—ã —É–≥–∞–¥–∞–ª–∏ —Å–ª–æ–≤–æ "${currentWord}"`;
                showScreen('resultScreen');
            } else {
                // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                alert('–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
                guessInput.value = '';
                guessInput.focus();
            }
        }

        function playAgain() {
            if (currentRole === 'drawer') {
                startDrawing();
            } else {
                startGuessing();
            }
        }

        function showMainScreen() {
            showScreen('mainScreen');
        }

        function showScreen(screenId) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —ç–∫—Ä–∞–Ω—ã
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–π —ç–∫—Ä–∞–Ω
            document.getElementById(screenId).classList.add('active');
            
            // –ï—Å–ª–∏ —ç—Ç–æ —ç–∫—Ä–∞–Ω —É–≥–∞–¥—ã–≤–∞–Ω–∏—è, –∑–∞–≥—Ä—É–∂–∞–µ–º —Ä–∏—Å—É–Ω–æ–∫
            if (screenId === 'guessScreen') {
                loadDrawing();
            }
        }

        function loadDrawing() {
            const savedData = localStorage.getItem('drawingData');
            const savedWord = localStorage.getItem('currentWord');
            
            if (savedData && savedWord) {
                currentWord = savedWord;
                const data = JSON.parse(savedData);
                redrawCanvas(data);
            } else {
                alert('–†–∏—Å—É–Ω–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω! –°–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å —á—Ç–æ-—Ç–æ.');
                showMainScreen();
            }
        }

        function redrawCanvas(data) {
            guessCtx.clearRect(0, 0, guessCanvas.width, guessCanvas.height);
            
            let currentPath = null;
            
            data.forEach(segment => {
                if (segment.type === 'begin') {
                    currentPath = {
                        points: [{x: segment.x, y: segment.y}],
                        color: segment.color
                    };
                    guessCtx.strokeStyle = segment.color;
                    guessCtx.beginPath();
                    guessCtx.moveTo(segment.x, segment.y);
                } else if (segment.type === 'draw' && currentPath) {
                    currentPath.points.push({x: segment.x, y: segment.y});
                    guessCtx.lineTo(segment.x, segment.y);
                    guessCtx.stroke();
                } else if (segment.type === 'end') {
                    currentPath = null;
                }
            });
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = init;
    </script>
</body>
</html>
